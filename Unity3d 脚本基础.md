# 简述Unity3D 的发展

## 发展史

起源  由来  未来趋势

http://www.leiphone.com/news/201406/0618-xiaotian-unity3d-introduction-2.html

2004年，Unity诞生于丹麦的阿姆斯特丹，05年将总部设在了美国的旧金山，并发布了Unity 1.0版本。起初它只能应用于MAC平台，主要针对WEB项目和VR(虚拟现实)的开发。这时的它并不起眼，直到2008年推出windows版本，并开始支持iOS和Wii，才逐步从众多的游戏引擎中脱颖而出，并顺应移动游戏的潮流而变得炙手可热。2009年的时候，Unity的注册人数已经达到了3.5万，荣登2009年游戏引擎的前五名。2010年，Unity开始支持android，继续扩散影响力。其在2011年开始支持PS3和XBOX360，则可看做全平台的构建完成。

如此的跨平台能力，很难让人再挑剔，尤其是支持当今最火的web，ios和android。另据国外媒体《游戏开发者》调查，Unity是开发者使用最广泛的移动游戏引擎，53.1%的开发者正在使用，同时在游戏引擎里哪种功能最重要的调查中，“快速的开发时间”排在了首位，很多Unity用户认为这款工具易学易用，一个月就能基本掌握其功能。而目前，这款引擎的注册人数已经井喷般增长到了八十万，其中移动游戏支撑了Unity公司差不多一半的利润。iPhone App Store里有超过一千五百个基于Unity的游戏，其中最为热销的有Shadowgun（暗影之枪）, Battleheart（勇者之心）, Gears（幻想齿轮）, Snuggle Truck（动物卡车）等。

与此同时，Unity还提供了免费版本，虽然简化了一些功能，却打破了游戏引擎公司靠卖license赚钱的常规，采用了更为流行的利益分成，二八开的方式，为开发者提供了Union和Asset Store的销售平台，任何游戏制作者都可以把自己的作品放到Union上销售，而单个模型或是骨骼动画也可以放到Asset Store上。如此一站式的销售、开发平台，为广大游戏制作者称赞。不过如果是开发ios和android游戏，则必须支付400美元的额外费用，被称作引擎附加许可证。

收费版本自然更为强大，尽管license需要1500美元，却可带来自定义的Splash Screen，代码优化，视频回放，音频滤波，光影工具，低级补偿，性能优化和组件簇等一系列内容。

所以如果试用了免费版以后觉得很赞，并决心要发布精良的Unity应用，还是放点血去购买收费版吧，你会得到你想要的一切。

如此的跨平台能力，很难让人再挑剔，尤其支持当今最火的Web、iOS和Android。另据国外媒体“游戏开发者”调查，Unity是开发者使用最广泛的移动游戏引擎，53.1%的开发者正在使用，同时在游戏引擎里哪种功能最重要的调查中，“快速的开发时间”排在了首位，很多Unity用户认为这款工具易学易用，一个月就能基本掌握其功能。而目前，这款引擎的注册人数已经井喷般增长到了80万，其中移动游戏支撑了Unity公司差不多一半的利润。已知用Unity开发的知名游戏有:

坎巴拉太空计划（2011）

唯舞独尊(FaceBook)（2012）

捣蛋猪（2012）

万舰穿星（2012）

神庙逃亡2（2012）

废土2（2013）

新仙剑奇侠传Online(2013)

Kingdom Knights-王国骑士团（2013）

酷游视界-酷酷英雄传（2013）

轩辕剑六：凤凌长空千载云（2013）

炉石传说：魔兽英雄传（2013）


Facebook重金收购Oculus，虚拟现实概念被热炒，网络上纷纷扬扬的各种推测让人眼花缭乱。也许，我们该透过业界人士的眼光看待虚拟现实的发展。Unity大中华区总裁符国新曾在明道大会发表主题演讲，他在演讲中表示，3D是技术趋势，可应用到游戏、建筑业、广告业、医疗行业等多个行业，渗透到生活的方方面面。


1.4.2 Unity 的资源商店（Asset Store）

[Unity 的资源商店](https://www.assetstore.unity3d.com/cn/)

为了方便用户的项目开发，Unity的资源商店Asset Store拥有很多由Unity Technologies和社会成员创造的免费和商业资源。各种可用的资源，在这其中包括有纹理、模型、动画甚至整个项目的例子、教程和用于编辑器扩展功能的插件等。您可以通过官方页面连接跳转至资源商店进行浏览，也可以通过Unity引擎菜单栏“Window”→“Asset Store”打开资源商店窗口，如图1.30所示。在第一次访问时，会提示您创建一个免费的用户账户。创建完成后可以通过图中的Categories分类一栏查找您所需要的资源，其中包括收费与免费的资源。
 

**1.1.1 Unity版本快速迭代升级**

Unity 技术诞生于2004年的丹麦阿姆斯特丹，2005年发布了Unity 1.0版本。

2007年10月,Unity 2.0版本发布。增加了地形引擎、实时动态阴影，支持DirectX 9，并具有内置的网络多人联机功能。

Unity3D/2D游戏开发从0到1第1章游戏历史与Unity发展概述2009年3月，Unity 2.5发布。添加了对Windows Vista 和XP的全面支持，所有的功能都可以与Mac OS X 实现同步和互通。

2010年9月，Unity 3.0 发布。添加了对Android 平台的支持。

2012年4月，Unity 上海分公司成立，Unity 正式进军中国市场。

2012年11月，Unity 4.0 发布。加入了Mecanim 动画系统及对DirectX 11 的支持。

2013年6月，Unity 在大中华区正式推出国际认证考试。

2013年11月，Unity 4.3 版本全球发布2D 工具，原生支持2D 开发。

这将是Unity历史上具有划时代意义的一刻，标志着Unity 不再是单一的3D工具，而是真正的能够同时支持二维和三维内容的开发与发布。

2014年推出Unity 4.6 版本。突出增强了系统UI特性，后续版本的游戏、虚拟现实等项目的开发无须再借助第三方插件的形式，即可开发出功能强大、易用、高效的系统UI界面。

2015年初Unity 官网推出Unity 5(图1.2)特性预览。Unity 5在至少以下几个方面有更大的突破（图1.3）。

## 应用范围

**1.1.2 Unity 技术应用范围**

适合于游戏开发、多平台交互、虚拟现实、增强现实、科技创意、仿真、建筑可视化等各行各业。
 

工业 医学  游戏 等行业

Unity3D 开发的游戏

《炉石传说》

**1.1.3 强大的跨平台性**

在已经发布的Unity 4.6以上版本中，Unity更是将支持Windows、Mac OS X、Web Browsers、iOS、Android、PlayStation 3、Xbox 360、Xbox One、Windows Store、Windows Phone、Linux、Blackberry 10、Wii U、PlayStation 4、PlayStation Vita、PlayStation Mobile、Samsung Tizen、Xbox One等几乎所有的主流平台，开发者可以通过一次开发，进而以极小的代价将自己的游戏作品发布到多个平台上去！如图1.4和图1.5所示。

**1.3.6 Unity游戏引擎的主要特性**

综合性的编辑——Unity具有层级式的综合开发环境及可视化编辑，它详细的属性编辑器和动态的游戏预览使得Unity更多地用于制作游戏或者开发游戏原型（图1.23）。
 



多平台的导出功能——Unity游戏引擎不但可以开发微软Microsoft Windows和Mac OS X 的游戏与应用，甚至可以通过Unity Web Player插件支持 Internet Explorer、Firefox、Safari、Mozilla、Netscape、Opera和 Camino、Mac OS X的Dashboard工具，Wii程序和iPhone应用程序。

便捷的自动资源导入——项目中的资源会被自动导入，并根据资源的改动自动更新。虽然很多主流的三维建模软件为Unity所支持，但对于3ds Max、Maya、Blender、Cinema 4D和Cheetah3D的支持比较好，并支持一些其他的三维格式。

优质强大的图形动力——Unity对DirectX和OpenGL拥有高度优化的图形渲染管线。支持Bump mapping、Reflection mapping、Parallax mapping、Screen Space Ambient Occlusion，使用了Shadow Map技术实现动态阴影，并能够支持Render-to-texture和全屏 Post Processing 效果。

着色器——Unity对shaders的编写使用ShaderLab语言，同时支持自有工作流中的编程方式或Cg.GLSL语言编写的shader。一个shader可以包含众多变量及一个参数接口，允许Unity判定参数是否为当前所支持并适配最适合参数，自己选择相应的shader类型以获得广大的兼容性。

物理系统——Unity引擎内置对NVidia的PhysX Physics engine支持。

易用的脚本语言——游戏脚本使用了基于Mono的Mono脚本，这是一个基于.Net Framework的开源语言，因此程序员可用JavaScript、C#或Boo加以编写。

强大的资源服务器——The Unity Asset Server，一个支持各种游戏和脚本的版本控制方案，使用PostgreSql作为后端。

音频和视频——音效系统基于Open AL程式库，可以播放Ogg Vorbis的压缩音效。视频播放采用Theora编码。

地型编辑——Unity内建地形编辑器，能够支持树木与植被贴片。

光影——Unity提供了具有柔和阴影与Beast光照烘焙工具，使您的场景拥有更好的效果。

互联网——Unity在多人网络连接中采用Raknet，大量减小了网络游戏开发的工作量。

Unity 3.X版本的发布代表了一个质的飞跃——内置的光照贴图（Lightmapping）、遮挡剔除（Occlusiculling）和调试器。编辑器经过了彻底革新，让您可以获得卓越的性能体验。

Unity 4.X版本的发布为您提供了强大的Mecanim动画系统，它允许同一段动画在不同身体比例的角色上使用，可以很容易地设置游戏中的角色、动画有限状态机，提高动画数据的使用率，使您的角色行为更为栩栩如生。

Unity引擎作为一种开发环境，可以让您脱离传统的游戏开发方式，以一种更简单的方式专注你的游戏开发。开发网络游戏、移动游戏、单机游戏，Unity都能够完全胜任。
 

# 环境准备

[官网](http://unity3d.com/)
Unity 4.6 安装包+破解版  30天试用版

1.4 Unity安装

1.4.1 Unity 下载与安装

Unity引擎官方网址：http://www.unity3d.com

Unity引擎下载地址：http://unity3d.com/unity/download

注：目前(2015年)，Unity官方的最新版本为Unity 5.x，但因本书籍编写时间较长、且考虑项目工程的兼容性、稳定性，所以本教材主要以Unity 4.6版本功能进行讲解。首次打开Unity官方网址时，我们可以通过单击右上方的按钮切换页面的语言种类，如图1.29所示。


# Unity3D 软件的熟悉

## 基本界面

Project 工程结构视图

Inspector 检视图


## 基本操作

**3D模型操作快捷方式**

Q（查看与移动）

W(沿轴向位移)

E（沿轴向旋转）

R（沿轴向缩放）

T（二维缩放）

# 基本脚本
## Vector3 三维向量

表示3D的向量和点
[http://game.ceeger.com/Script/Vector3/Vector3.html](http://game.ceeger.com/Script/Vector3/Vector3.html)

## Transform 变换

变换组件决定了场景中所有物体的方位，旋转和缩放。每个物体都有一个变换组件。

场景中的每一个对象都有一个transform，用来储存和控制物体的位置，旋转和缩放。

[http://game.ceeger.com/Components/class-Transform.html](http://game.ceeger.com/Components/class-Transform.html)

* Position 位置  以X、Y、Z坐标系表示变换的位置。
* Rotation 旋转  表示此变换以X，Y，Z轴为准的旋转程度，以角度为单位。
* Scale 缩放  沿着X，Y，Z轴缩放此变换。值为"1"时表示原始尺寸（物体最初被导入时的大小）

# 组件

# 第一个Unity3D 游戏

# 动手实践

# 多平台部署

win

Android

需要安装Android开发环境，在Unity中指定Android sdk的安装路径


iOS

----

# 2.1.1 开始一个游戏项目

**1 开始一个游戏项目**

在准备开始研发一款游戏之前，大部分游戏公司会对市场进行调研，然后确立项目的开发方向，比如开发一款角色扮演游戏，或者是格斗游戏等。之后，游戏公司需要根据项目的预期规模来招募或组建相应的游戏开发团队。

游戏实际上就是一套娱乐规则，游戏开发首先需要的是一份策划，游戏策划师的主要工作即是创建和完善这个游戏策划，制定规则。

策划师的工作非常重要，如果游戏策划出现问题，那么程序和美术的工作也会受到影响导致返工等，一个项目也可能因此失败，但对于一个原创的游戏来说，很难从一开始就有一份完美的游戏策划。

对于一款原创游戏，为了回避风险，在投入力量开发之前，可以考虑先进入Prototype（原型）开发阶段。这是一个快速尝试各种想法的阶段，策划师需要明确游戏的核心游戏规则，同时需要完成相应的程序和美术工作，通过较少的游戏内容，体现出游戏的核心乐趣。

因为策划师最初的一些创作思路可能是不正确的，开发可能出现反复，但因为这个阶段投入的人力物力较少，所以转变也较为灵活。

最后，我们需要对初期的游戏Demo做出评估，游戏的乐趣是否达到了预期，如果游戏不好玩，那就要考虑是否继续修改或停止项目。

**2 阶段性成果**

一款游戏的开发，可能需要很长时间，为了能有效的控制进度并监督质量，制定一个计划是很有必要的。它可以将整个游戏的开发过程分为几个阶段，每个阶段标志着完成了某些重要的功能。

在开发过程中，最好能够对不同阶段的版本进行备份，当出现严重问题的时候，可以返回到最近一个好的版本。
 
**3 策划**

在开发过程中，策划师通常会使用Office软件完成游戏策划，对于很多角色扮演或策略游戏来说，策划师需要对游戏中的数值进行计算和评估，这个环节非常重要，它是保证游戏平衡性的关键。

策划师还需要花费大量时间完成关卡编辑之类的工作。游戏规则本身并不能直接带来乐趣，只有通过具体的编排才能将规则有趣的反映出来。对于Unity游戏来说，关卡编辑工作主要都是在Unity的编辑器中完成，所以策划师同样也需要熟悉Unity的基本操作。

**4 编写角本**

Unity程序员的主要工作就是编写角本。Unity支持多种不同的角本语言，其中C#语言的使用最为广泛，如果你还不知道C#，可以参考本书的附录A快速的掌握它。

在Unity中，每个游戏中的物体都可以称为是一个游戏体（Game Object），实际上，一个Unity游戏，就是由不同的游戏体组成的。

Unity中的游戏体可以拥有多个组件（Component）。组件可以是一个角本，一个模型，一个物理碰撞体，一张贴图，一个粒子发射器，或是一个声音播放器。有了这些组件，游戏体就有了相应的功能，程序员可以通过编写角本控制游戏体及它所拥有的组件，从而实现游戏的逻辑。

Unity不但能开发单人游戏，也能开发多人游戏。它内置了RakNet（一个网络游戏开发包），适用于快速开发多人游戏。对于现在流行的"弱联网"非实时互动游戏，Unity提供了HTTP网络通信功能，可以方便的与PHP或.NET服务器实现网络通信。对于大型的网络游戏，开发者可以使用C#编写基于.NET的Socket客户端程序与使用C++、C#或Java开发的服务器端实现网络通信。

**5 美术**

对于3D游戏来说 ，美术团队的人数往往是非常多的。美术的职位比较多，包括原画设计，UI界面设计，3D角色模型师、3D场景模型师，3D动画师等。

美术的工作非常重要。现在，每天都有新游戏投入市场，一款游戏如果没有较好的画面，它将很容易被忽略。

在一款游戏当中，美术工作决非仅是艺术创造，同时还包含大量的技术环节。在手机平台上，内存相对比较小，如果不注意控制美术资源的总量，则可能会造成严重的内存问题，导致程序无法启动或经常崩溃。所以，在注重画面效果的同时，还要注意如何优化美术资源，在相对节约的情况下表现出最好的美术效果。

Unity支持几乎所有高端3D动画软件，如3dsMax、Maya、LightWave等，美术人员可以按需求选择自己的3D动画软件，将制作的模型和动画导出为FBX格式供Unity使用，在本书后面的章节中，会对这部分内容专门介绍。

**6 QA测试**

为了保证游戏质量，需要安排QA人员对游戏进行全面的测试。QA的主要工作是找出游戏中的BUG，这些BUG可能是程序造成的，也可能是关卡编辑错误造成的，也可能是美术资源的问题造成的。

我们最好能够对BUG进行分级（比如A、B、C）并跟踪修改记录，优先去修改较为严重的BUG。

因为修改BUG本身有时会造成出现新的BUG，所以在完成一个版本的修改后，仍需要对整个游戏进行较全面的测试。
 
**7 发布游戏**

使用Unity开发的手机游戏，可以发布到苹果的App Store，Google的Google Play，Amazon的Kindle Fire等在线商店，这些都是全球性的商店，用户可以在上面使用信用卡付费或免费下载数字产品。此外，Android在国内也有很多本土在线商店，如腾讯无线等。

网页平台仍是目前最大的一个游戏平台。Unity有自己的网页游戏格式，可以使用户在网页上直接体验Unity游戏，但用户必须安装Unity的网页插件，目前这个插件的使用还并不是很广泛。

Unity从版本4.0开始正式支持Flash平台，几乎所有浏览器上面都安装有Flash插件，所以将游戏以Flash格式发布到网页上面是个不错的主意。目前国内很多公司都在发展以Flash游戏为主的开放平台，任何开发者都可以将产品放到上面运营，并可能得到丰厚的回报。